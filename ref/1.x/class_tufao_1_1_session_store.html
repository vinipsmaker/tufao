<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>tufao: Tufao::SessionStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tufao_logo.svg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">tufao
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">An asynchronous web framework for C++ built on top of Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_tufao_1_1_session_store.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_tufao_1_1_session_store-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Tufao::SessionStore Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> class can be used to store data that must persist among different requests.  
 <a href="class_tufao_1_1_session_store.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Tufao::SessionStore:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_session_store__inherit__graph.png" border="0" usemap="#_tufao_1_1_session_store_inherit__map" alt="Inheritance graph"/></div>
<map name="_tufao_1_1_session_store_inherit__map" id="_tufao_1_1_session_store_inherit__map">
<area shape="rect" id="node3" href="class_tufao_1_1_simple_session_store.html" title="SimpleSessionStore implements a simple storage mechanism to SessionStore. " alt="" coords="5,476,184,715"/></map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for Tufao::SessionStore:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_session_store__coll__graph.png" border="0" usemap="#_tufao_1_1_session_store_coll__map" alt="Collaboration graph"/></div>
<map name="_tufao_1_1_session_store_coll__map" id="_tufao_1_1_session_store_coll__map">
<area shape="rect" id="node3" href="struct_tufao_1_1_session_settings.html" title="The SessionSettings class exposes details that sessions use to handle cookies. " alt="" coords="100,5,256,171"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6579b0f8477362b007c82446be40b93e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a6579b0f8477362b007c82446be40b93e">SessionStore</a> (const <a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a> &amp;<a class="el" href="class_tufao_1_1_session_store.html#a85333e5981b4bc71148df61dad8512ae">settings</a>=<a class="el" href="class_tufao_1_1_session_store.html#a3dc582d27025228db578e82ba1bc37f8">defaultSettings</a>(), QObject *parent=0)</td></tr>
<tr class="memdesc:a6579b0f8477362b007c82446be40b93e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> object.  <a href="#a6579b0f8477362b007c82446be40b93e">More...</a><br /></td></tr>
<tr class="separator:a6579b0f8477362b007c82446be40b93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b527b9674671d746a7ad402c48073f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7b527b9674671d746a7ad402c48073f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#ab7b527b9674671d746a7ad402c48073f">~SessionStore</a> ()</td></tr>
<tr class="memdesc:ab7b527b9674671d746a7ad402c48073f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs a <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> object. <br /></td></tr>
<tr class="separator:ab7b527b9674671d746a7ad402c48073f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad89b53102b7f4af0724df75de1b674c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad89b53102b7f4af0724df75de1b674c6"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#ad89b53102b7f4af0724df75de1b674c6">hasSession</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request) const =0</td></tr>
<tr class="memdesc:ad89b53102b7f4af0724df75de1b674c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a session has been set the <code>request</code>. <br /></td></tr>
<tr class="separator:ad89b53102b7f4af0724df75de1b674c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47fad33d4a35d2d4d9c5cd67c13fe56"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#aa47fad33d4a35d2d4d9c5cd67c13fe56">removeSession</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response)=0</td></tr>
<tr class="memdesc:aa47fad33d4a35d2d4d9c5cd67c13fe56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the session, if any, in the <code>request</code>.  <a href="#aa47fad33d4a35d2d4d9c5cd67c13fe56">More...</a><br /></td></tr>
<tr class="separator:aa47fad33d4a35d2d4d9c5cd67c13fe56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3461d4b010560d1ceb87e64fc5c454"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a8c3461d4b010560d1ceb87e64fc5c454">resetSession</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request) const </td></tr>
<tr class="memdesc:a8c3461d4b010560d1ceb87e64fc5c454"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method removes all cookies matching with this store's settings from <code>request</code>.  <a href="#a8c3461d4b010560d1ceb87e64fc5c454">More...</a><br /></td></tr>
<tr class="separator:a8c3461d4b010560d1ceb87e64fc5c454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16bc3c5c767572ffb42d24be5d8b118d"><td class="memItemLeft" align="right" valign="top">virtual QList&lt; QByteArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a16bc3c5c767572ffb42d24be5d8b118d">properties</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response) const =0</td></tr>
<tr class="memdesc:a16bc3c5c767572ffb42d24be5d8b118d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of set properties to this session.  <a href="#a16bc3c5c767572ffb42d24be5d8b118d">More...</a><br /></td></tr>
<tr class="separator:a16bc3c5c767572ffb42d24be5d8b118d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5006c78728899d856c70bea12ea27e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#abe5006c78728899d856c70bea12ea27e">hasProperty</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response, const QByteArray &amp;key) const =0</td></tr>
<tr class="memdesc:abe5006c78728899d856c70bea12ea27e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the session has a property named <code>key</code>.  <a href="#abe5006c78728899d856c70bea12ea27e">More...</a><br /></td></tr>
<tr class="separator:abe5006c78728899d856c70bea12ea27e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6bef1faa755b9a8a2a3c6eeba5ef67"><td class="memItemLeft" align="right" valign="top">virtual QVariant&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a9d6bef1faa755b9a8a2a3c6eeba5ef67">property</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response, const QByteArray &amp;key) const =0</td></tr>
<tr class="memdesc:a9d6bef1faa755b9a8a2a3c6eeba5ef67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the property referenced by <code>key</code> in the session, or a null QVariant if the property isn't found.  <a href="#a9d6bef1faa755b9a8a2a3c6eeba5ef67">More...</a><br /></td></tr>
<tr class="separator:a9d6bef1faa755b9a8a2a3c6eeba5ef67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8ddedcd27ac09cf7d8e63434fd42b1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a0b8ddedcd27ac09cf7d8e63434fd42b1">setProperty</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response, const QByteArray &amp;key, const QVariant &amp;value)=0</td></tr>
<tr class="memdesc:a0b8ddedcd27ac09cf7d8e63434fd42b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the property's value referenced by <code>key</code> to <code>value</code>.  <a href="#a0b8ddedcd27ac09cf7d8e63434fd42b1">More...</a><br /></td></tr>
<tr class="separator:a0b8ddedcd27ac09cf7d8e63434fd42b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af42acbc1cdae329a99c2d1ce24e8ab"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a6af42acbc1cdae329a99c2d1ce24e8ab">removeProperty</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response, const QByteArray &amp;key)=0</td></tr>
<tr class="memdesc:a6af42acbc1cdae329a99c2d1ce24e8ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the property referenced by <code>key</code> in the session, if any.  <a href="#a6af42acbc1cdae329a99c2d1ce24e8ab">More...</a><br /></td></tr>
<tr class="separator:a6af42acbc1cdae329a99c2d1ce24e8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97a029ba6a101f5728f9d5c1b7bd9dc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a97a029ba6a101f5728f9d5c1b7bd9dc4">setMacSecret</a> (const QByteArray &amp;secret)</td></tr>
<tr class="memdesc:a97a029ba6a101f5728f9d5c1b7bd9dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the secret key of the message authentication code.  <a href="#a97a029ba6a101f5728f9d5c1b7bd9dc4">More...</a><br /></td></tr>
<tr class="separator:a97a029ba6a101f5728f9d5c1b7bd9dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3dc582d27025228db578e82ba1bc37f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a3dc582d27025228db578e82ba1bc37f8">defaultSettings</a> ()</td></tr>
<tr class="memdesc:a3dc582d27025228db578e82ba1bc37f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the default settings, used when you don't specify the settings argument in <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> constructor.  <a href="#a3dc582d27025228db578e82ba1bc37f8">More...</a><br /></td></tr>
<tr class="separator:a3dc582d27025228db578e82ba1bc37f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a7d4c9204e95689c0d3fc2575b66e32cd"><td class="memItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a7d4c9204e95689c0d3fc2575b66e32cd">session</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request) const </td></tr>
<tr class="memdesc:a7d4c9204e95689c0d3fc2575b66e32cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the first cookie that is compatible with this store's properties, as defined in its settings.  <a href="#a7d4c9204e95689c0d3fc2575b66e32cd">More...</a><br /></td></tr>
<tr class="separator:a7d4c9204e95689c0d3fc2575b66e32cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace3bbf8b4c7bd6b9b8f8c2902956a4ac"><td class="memItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#ace3bbf8b4c7bd6b9b8f8c2902956a4ac">session</a> (const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;request, const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response) const </td></tr>
<tr class="memdesc:ace3bbf8b4c7bd6b9b8f8c2902956a4ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of the first cookie that is compatible with this store's properties, as defined in its settings.  <a href="#ace3bbf8b4c7bd6b9b8f8c2902956a4ac">More...</a><br /></td></tr>
<tr class="separator:ace3bbf8b4c7bd6b9b8f8c2902956a4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5543907b5032685e26e798aaea65d4f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a5543907b5032685e26e798aaea65d4f1">setSession</a> (<a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response, const QByteArray &amp;<a class="el" href="class_tufao_1_1_session_store.html#a7d4c9204e95689c0d3fc2575b66e32cd">session</a>) const </td></tr>
<tr class="memdesc:a5543907b5032685e26e798aaea65d4f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a cookie that matches the store's settings in the <code>response</code> object.  <a href="#a5543907b5032685e26e798aaea65d4f1">More...</a><br /></td></tr>
<tr class="separator:a5543907b5032685e26e798aaea65d4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba2f35b7644142a6b65c5c5230662c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#adba2f35b7644142a6b65c5c5230662c9">unsetSession</a> (<a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;response) const </td></tr>
<tr class="memdesc:adba2f35b7644142a6b65c5c5230662c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalidates the user's session.  <a href="#adba2f35b7644142a6b65c5c5230662c9">More...</a><br /></td></tr>
<tr class="separator:adba2f35b7644142a6b65c5c5230662c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a85333e5981b4bc71148df61dad8512ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_session_store.html#a85333e5981b4bc71148df61dad8512ae">settings</a></td></tr>
<tr class="memdesc:a85333e5981b4bc71148df61dad8512ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">This attribute represents the session's settings.  <a href="#a85333e5981b4bc71148df61dad8512ae">More...</a><br /></td></tr>
<tr class="separator:a85333e5981b4bc71148df61dad8512ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> class can be used to store data that must persist among different requests. </p>
<p>This is used in web applications, among other, to measure online users, create a shopping list per user and implement a login system.</p>
<h1>Using sessions </h1>
<p>The session data is stored in properties. You can create a session to any pair of request and response objects and each one will have an independent set of properties.</p>
<dl class="section note"><dt>Note</dt><dd>You can configure a session in any response (including 400-level and 500-level status responses), but the user agent may ignore sessions with a 100-level status line.</dd></dl>
<p>To access the session properties, you must pass the request and response objects each time you want to manipulate, but this step can be eliminated using the <a class="el" href="class_tufao_1_1_session.html" title="This class provides easier access to the session&#39;s properties. ">Session</a> helper class.</p>
<dl class="section note"><dt>Note</dt><dd>You can configure multiple sessions to the same user agent, but only if you are using settings that have different scope. The settings have the same scope if the name, domain and path attributes are equal.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Despite the possibility of use different stores having SessionSetting objects with the same name attribue, it's recomended to avoid the use of this feature because a store don't have knowledge about the settings of other stores and can easily use the wrong request's cookie in a misconfigured application.</dd></dl>
<p>One session only persists for a specified period of time (set through <a class="el" href="struct_tufao_1_1_session_settings.html" title="The SessionSettings class exposes details that sessions use to handle cookies. ">SessionSettings</a>) and the storage details depends upon the class implementing the <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> interface.</p>
<dl class="section note"><dt>Note</dt><dd>The use of sessions don't preclude HTTP caches from storing and reusing a response.</dd></dl>
<h2>Security concerns </h2>
<dl class="section warning"><dt>Warning</dt><dd>Tuf達o uses cookies as base for its session support, but cookies have a number of security pitfalls and you should read this section if you are going to use them to store any sensitive information, such as login systems.</dd></dl>
<p>To better understand the problems shown in the following subsections, you should understand how cookies works.</p>
<p>A cookie is a piece of text built of a name and a value. The server includes a <em>Set-Cookie</em> header and the user agent will include this cookie in every subsequent request made to this server (when the cookie's scope applies), until the cookie expires.</p>
<p>For example, consider that user <em>U</em> made a request to server <em>S</em> and received the following reply: </p><pre class="fragment">HTTP/1.1 200 OK
Set-Cookie: Pants=On
...
</pre><p>Then, user <em>U</em> will include the following header in every request made to <em>S</em>: </p><pre class="fragment">Cookie: Pants=On
</pre><p>In <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a>, cookies are abstracted, and they'll be created as needed by some operations. If it finds a valid cookie, it'll use, but if not, it'll create one.</p>
<p>The "valid cookie" term depends on the implementation used.</p>
<h3>Attacks using session fixation</h3>
<p>These attacks exploits applications that allows one user fixate another's user cookie. Consider the following code:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> RequestHandler::handleRequest(<a class="code" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;request,</div>
<div class="line">                                   <a class="code" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;response)</div>
<div class="line">{</div>
<div class="line">    QByteArray username(getUsername(request));</div>
<div class="line">    QByteArray userpassword(getUserpassword(request));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!performLogin(username, userpassword)) {</div>
<div class="line">        loginFail(response);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    store.setProperty(request, response, <span class="stringliteral">&quot;user&quot;</span>, username);</div>
<div class="line"></div>
<div class="line">    loginSuccess(response);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Try to answer: What could happen with an application running the previous code?</p>
<p>Here is what can happens:</p>
<ol type="1">
<li>The attacker fixate the victim cookie's value to "I_KNOW_YOUR_ID". Depending on the application store's settings (including implementation and mac secret), an arbitrary value will be rejected by the store, but the attacker may still be able get an usable cookie value (maybe using the application itself to generate one).</li>
<li>The victim access the application and perform the login.</li>
<li>The application's store finds a cookie and reuses it to set the <em>user</em> property.</li>
<li>The attacker uses the victim cookie's value and will have unlimited access to the victim's account.</li>
</ol>
<p>How an attacker could set the victim cookie value is out of the scope of this document, because there are <em>several</em> techniques to achieve this.</p>
<blockquote class="doxtable">
<p>Never trust users input. </p>
</blockquote>
<h4>How defend against session fixation</h4>
<p>In Tuf達o, you can defend against session fixation calling <a class="el" href="class_tufao_1_1_session_store.html#a8c3461d4b010560d1ceb87e64fc5c454" title="This method removes all cookies matching with this store&#39;s settings from request. ...">SessionStore::resetSession</a> to force a new session to be created.</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> RequestHandler::handleRequest(<a class="code" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;request,</div>
<div class="line">                                   <a class="code" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;response)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// To make sense, this line must be inserted before call any session-related</span></div>
<div class="line">    <span class="comment">// code</span></div>
<div class="line">    store.resetSession(request);</div>
<div class="line"></div>
<div class="line">    QByteArray username(getUsername(request));</div>
<div class="line">    QByteArray userpassword(getUserpassword(request));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!performLogin(username, userpassword)) {</div>
<div class="line">        loginFail(response);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    store.setProperty(request, response, <span class="stringliteral">&quot;user&quot;</span>, username);</div>
<div class="line"></div>
<div class="line">    loginSuccess(response);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Attacks using cross site request forgery</h3>
<p>After the user is authenticated in your application, it can perform some actions, such as transfer money to another account. If it's possible to create a script to automate these actions, then it's possible for an attacker to instruct the victim's user agent to perform this action. An example of a scriptable action is the url below:</p>
<blockquote class="doxtable">
<p><a href="http://bank.example.com/withdraw?account=foo&amount=1000000&for=bar">http://bank.example.com/withdraw?account=foo&amp;amount=1000000&amp;for=bar</a> </p>
</blockquote>
<p>First, you <em>shouldn't</em> allow GET methods to mutate the server's state, but, in this case, use POST wouldn't defend our users against attackers. To prevent our actions from being scriptable, we need to require that an action only will be valid if it's originated from our application.</p>
<p>A technique to achieve the behaviour suggested in the previous paragraph is to generate some random data (a challenge token) and associate it with the user's current session. Then, we insert this token in the pages served to this user. The following code shows part of the solution:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> RequestHandler::handleRequest(<a class="code" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;request,</div>
<div class="line">                                   <a class="code" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;response)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="class_tufao_1_1_session.html">Tufao::Session</a> s(store, request, response);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Here, we provide needed data for the application to perform an action.</span></div>
<div class="line">    <span class="comment">// In the handler that will perform the action, we ignore requests with</span></div>
<div class="line">    <span class="comment">// incorrect tokens.</span></div>
<div class="line">    response &lt;&lt; <span class="comment">/* ... */</span></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;CSRFToken\&quot; value=\&quot;&quot;</span></div>
<div class="line">             &lt;&lt; s[<span class="stringliteral">&quot;CSRFToken&quot;</span>] &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span></div>
<div class="line">             &lt;&lt; <span class="comment">/* ... */</span>;</div>
<div class="line"></div>
<div class="line">    response.<a class="code" href="class_tufao_1_1_http_server_response.html#a1e72bbd8eb9bfb065a713a2ac9ba3b2e">end</a>();</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>To generate a challenge token, you can use QUuid. To improve this design even further, you can regenerate the token and name parameters for each request.</p>
<p>Yet another option is to requiring the client to provide authentication data in the same request used to perform the action, but this solution add a usability issue.</p>
<h3>Other problems</h3>
<p>As defined in RFC 6265 and implemented in browsers, cookies don't provide strong confidentiality. They don't provide:</p>
<ul>
<li>Isolation by port. A service running on one port has access to cookies of a service running on another port of the same host.</li>
<li>Isolation by scheme.</li>
<li>Full-isolation by path. User agents won't send cookies from one path to another, but it's still possible for a service to <em>set</em> a cookie of a service running in another path of the same host.</li>
</ul>
<p>Cookies don't provide strong integrity also.</p>
<p>You can avoid the previous problems by signing or encrypting cookies, but it'll still be possible for an attacker to perform a replay attack.</p>
<p>You can signing cookies in Tuf達o using <a class="el" href="class_tufao_1_1_session_store.html#a97a029ba6a101f5728f9d5c1b7bd9dc4" title="Sets the secret key of the message authentication code. ">SessionStore::setMacSecret</a> and hide the session data using a <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> implementation that don't store its data in the cookie.</p>
<p>See <a class="el" href="struct_tufao_1_1_session_settings.html" title="The SessionSettings class exposes details that sessions use to handle cookies. ">SessionSettings</a> for more information.</p>
<h1>Implementing your own storage backend </h1>
<p>If the implementations shipped with Tuf達o don't supply your needs, you can provide your own storage backend. To do that, you must implement the pure virtual methods of this class. They give you full access to the cookies returned from the user agent and included in the response objects.</p>
<p>The protected methods may help you process and include the cookies. They already take care of the boring task of read and comply with the <a class="el" href="struct_tufao_1_1_session_settings.html" title="The SessionSettings class exposes details that sessions use to handle cookies. ">SessionSettings</a> object and sign the cookies.</p>
<p>This flexible design is what allows you, among other, implement a pure cookie based storage mechanism.</p>
<h2>Security concerns </h2>
<p>If the application request your store to manipulate some property and the request provides a session's id that don't correspond to any session in the store, you <em>should not</em> reuse this value as an id. You should <em>ignore it</em> and create a new one. This design may add restrictions to some forms of attacks.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_tufao_1_1_session_settings.html" title="The SessionSettings class exposes details that sessions use to handle cookies. ">SessionSettings</a> <a class="el" href="class_tufao_1_1_session.html" title="This class provides easier access to the session&#39;s properties. ">Session</a></dd></dl>
<dl class="section since"><dt>Since</dt><dd>0.4 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6579b0f8477362b007c82446be40b93e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tufao::SessionStore::SessionStore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>settings</em> = <code><a class="el" href="class_tufao_1_1_session_store.html#a3dc582d27025228db578e82ba1bc37f8">defaultSettings</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> object. </p>
<dl class="section user"><dt>settings Specifies session parameters.</dt><dd></dd></dl>
<dl class="section user"><dt>parent is passed to the QObject constructor.</dt><dd></dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3dc582d27025228db578e82ba1bc37f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a> Tufao::SessionStore::defaultSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the default settings, used when you don't specify the settings argument in <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a> constructor. </p>
<p>The default values to these settings are:</p><ul>
<li>timeout: 15</li>
<li>httpOnly: true</li>
<li>key: "SID"</li>
<li>path: "/"</li>
<li>secure: false</li>
</ul>
<p>If you use more than one store in the same application, you need to set a unique key to each one. </p>

</div>
</div>
<a class="anchor" id="abe5006c78728899d856c70bea12ea27e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool Tufao::SessionStore::hasProperty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the session has a property named <code>key</code>. </p>
<p>The session is represented by the pair <code>request</code>, <code>response</code>. </p>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#a47f026277ecf7c8f9ade1b9470b57e11">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="a16bc3c5c767572ffb42d24be5d8b118d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QList&lt;QByteArray&gt; Tufao::SessionStore::properties </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a list of set properties to this session. </p>
<p>The session is represented by the pair <code>request</code>, <code>response</code>. </p>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#adf2b77b612b235f2095592d4afec5827">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="a9d6bef1faa755b9a8a2a3c6eeba5ef67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QVariant Tufao::SessionStore::property </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the property referenced by <code>key</code> in the session, or a null QVariant if the property isn't found. </p>
<p>The session is represented by the pair <code>request</code>, <code>response</code>. </p>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#ac6389d1f1cc73439e2486b14ca48f310">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="a6af42acbc1cdae329a99c2d1ce24e8ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tufao::SessionStore::removeProperty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the property referenced by <code>key</code> in the session, if any. </p>
<p>The session is represented by the pair <code>request</code>, <code>response</code>. </p>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#a85975cd6be388994ed476b394dac636e">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="aa47fad33d4a35d2d4d9c5cd67c13fe56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tufao::SessionStore::removeSession </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the session, if any, in the <code>request</code>. </p>
<dl class="section user"><dt>response The object used to invalidate the user's cookie.</dt><dd></dd></dl>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#a35c9858493bb0578378d406f3bf7fb10">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="a8c3461d4b010560d1ceb87e64fc5c454"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tufao::SessionStore::resetSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method removes all cookies matching with this store's settings from <code>request</code>. </p>
<p>The purpose is hide the cookies from other pieces of code handling <code>request</code>.</p>
<p>Call this if you need to reset the session id. </p>

</div>
</div>
<a class="anchor" id="a7d4c9204e95689c0d3fc2575b66e32cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray Tufao::SessionStore::session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value of the first cookie that is compatible with this store's properties, as defined in its settings. </p>
<dl class="section warning"><dt>Warning</dt><dd>If you get a session that doesn't exists, you <em>MUST NOT</em> reuse this id. Create a new one and discard this, or you will introduce a session fixation vulnerability. </dd></dl>

</div>
</div>
<a class="anchor" id="ace3bbf8b4c7bd6b9b8f8c2902956a4ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray Tufao::SessionStore::session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value of the first cookie that is compatible with this store's properties, as defined in its settings. </p>
<p>Besides searching in the <code>request's</code> headers named as "Cookie", search in <code>response's</code> headers named as "Set-Cookie". This allows you to manipulate sessions as soon as they are set.</p>
<dl class="section warning"><dt>Warning</dt><dd>If you get a session that doesn't exists, you <em>MUST NOT</em> reuse this id. Create a new one and discard this, or you will introduce a session fixation vulnerability. </dd></dl>

</div>
</div>
<a class="anchor" id="a97a029ba6a101f5728f9d5c1b7bd9dc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tufao::SessionStore::setMacSecret </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>secret</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the secret key of the message authentication code. </p>
<p>If set, it will protects the cookies integrity and authenticity.</p>
<dl class="section warning"><dt>Warning</dt><dd>The value used here <em>must</em> remain secret.</dd></dl>
<p>The algorithm used by Tuf達o is HMAC + SHA1. </p>

</div>
</div>
<a class="anchor" id="a0b8ddedcd27ac09cf7d8e63434fd42b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Tufao::SessionStore::setProperty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QVariant &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the property's value referenced by <code>key</code> to <code>value</code>. </p>
<p>The session is represented by the pair <code>request</code>, <code>response</code>. </p>

<p>Implemented in <a class="el" href="class_tufao_1_1_simple_session_store.html#ab0a441652b55362c5de8b0991ecbbfc3">Tufao::SimpleSessionStore</a>.</p>

</div>
</div>
<a class="anchor" id="a5543907b5032685e26e798aaea65d4f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tufao::SessionStore::setSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets a cookie that matches the store's settings in the <code>response</code> object. </p>
<dl class="section note"><dt>Note</dt><dd>It will also renew cokie's lifetime.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Call this method more than once to the same <code>response</code> object has undefined behaviour.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If you need to create a new unique identifier, but don't know how, check the QUuid class.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_tufao_1_1_session_settings.html#a848609353a22b61360492c9fedc5fd85" title="Creates a cookie, using value as the cookie&#39;s value. ">SessionSettings::cookie</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adba2f35b7644142a6b65c5c5230662c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tufao::SessionStore::unsetSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invalidates the user's session. </p>
<p>This is done by setting the expiration date to the past, as specified by RFC 6265. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a85333e5981b4bc71148df61dad8512ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_tufao_1_1_session_settings.html">SessionSettings</a> Tufao::SessionStore::settings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This attribute represents the session's settings. </p>
<p>It will be used in the operations involving cookie's handling and is set automatically in <a class="el" href="class_tufao_1_1_session_store.html" title="SessionStore class can be used to store data that must persist among different requests. ">SessionStore</a>'s constructor. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="sessionstore_8h_source.html">sessionstore.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_tufao.html">Tufao</a></li><li class="navelem"><a class="el" href="class_tufao_1_1_session_store.html">SessionStore</a></li>
    <li class="footer">Generated on Sun Mar 29 2015 12:14:31 for tufao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
