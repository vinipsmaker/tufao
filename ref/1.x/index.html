<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>tufao: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tufao_logo.svg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">tufao
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">An asynchronous web framework for C++ built on top of Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tufao Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tufao-overview">Introduction</a></li>
<li class="level1"><a href="#tufao-introduction">Creating a Tufão-based application</a><ul><li class="level2"><a href="#tufao-hello">Hello World!</a></li>
<li class="level2"><a href="#tufao-revisiting-hello">Revisiting Hello World!</a></li>
<li class="level2"><a href="#tufao-code">And then, there was the code</a></li>
<li class="level2"><a href="#tufao-build">Build system integration</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="tufao-overview"></a>
Introduction</h1>
<p>Tufão is a web framework for C++ that makes use of Qt's object communication system (signals &amp; slots). It features:</p><ul>
<li>High performance standalone server</li>
<li>Cross-plataform support</li>
<li>Good documentation</li>
<li>Support modern HTTP features<ul>
<li>Persistent streams</li>
<li>Chunked entities</li>
<li>100-continue status</li>
<li>WebSocket</li>
</ul>
</li>
<li>HTTPS support</li>
<li>Flexible request router</li>
<li>Static file server with support for conditional requests, partial download and automatic mime detection</li>
<li>Plugin-based server to allow change the running code without restart the application</li>
<li>Flexible and secure session support</li>
<li>QtCreator's plugin to allow create new applications rapidly</li>
<li>Timeout support</li>
</ul>
<p>It uses Ryan Dahl's HTTP parser to provide good performance.</p>
<h1><a class="anchor" id="tufao-introduction"></a>
Creating a Tufão-based application</h1>
<p>In this section, I assume that you already have installed Tufão libraries and tools (QtCreator's plugin, ...). If you have any trouble following the <a href="https://github.com/vinipsmaker/tufao#build">build/install steps</a>, <a href="https://github.com/vinipsmaker/tufao/wiki/Support">click here</a>.</p>
<h2><a class="anchor" id="tufao-hello"></a>
Hello World!</h2>
<p>Let's start by examining a <em>Hello World</em> application:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpServer&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpServerResponse&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespace_tufao.html">Tufao</a>;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;{</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    QCoreApplication a(argc, argv);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <a class="code" href="class_tufao_1_1_http_server.html">HttpServer</a> server;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    QObject::connect(&amp;server, &amp;<a class="code" href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71">HttpServer::requestReady</a>,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                     [](HttpServerRequest &amp;, <a class="code" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;res) {</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                         res.<a class="code" href="class_tufao_1_1_http_server_response.html#a92e2c93847baadab863b324e7af862ed">writeHead</a>(200, <span class="stringliteral">&quot;OK&quot;</span>);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                         res.<a class="code" href="class_tufao_1_1_http_server_response.html#a1e72bbd8eb9bfb065a713a2ac9ba3b2e">end</a>(<span class="stringliteral">&quot;Hello World\n&quot;</span>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    });</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    server.<a class="code" href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9">listen</a>(QHostAddress::Any, 8080);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">return</span> a.exec();</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;}</div>
<div class="ttc" id="class_tufao_1_1_http_server_response_html"><div class="ttname"><a href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a></div><div class="ttdoc">The Tufao::HttpServerResponse is used to respond to a Tufao::HttpServerRequest. </div><div class="ttdef"><b>Definition:</b> httpserverresponse.h:142</div></div>
<div class="ttc" id="namespace_tufao_html"><div class="ttname"><a href="namespace_tufao.html">Tufao</a></div><div class="ttdoc">This is the namespace where all Tufão facilities are grouped. </div><div class="ttdef"><b>Definition:</b> abstracthttpserverrequesthandler.h:30</div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html_a53ebaa69281886b1b8c2b535aaec8cd9"><div class="ttname"><a href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9">Tufao::HttpServer::listen</a></div><div class="ttdeci">bool listen(const QHostAddress &amp;address=QHostAddress::Any, quint16 port=0)</div><div class="ttdoc">Tells the server to listen for incoming connections on address address and port port. </div></div>
<div class="ttc" id="class_tufao_1_1_http_server_response_html_a92e2c93847baadab863b324e7af862ed"><div class="ttname"><a href="class_tufao_1_1_http_server_response.html#a92e2c93847baadab863b324e7af862ed">Tufao::HttpServerResponse::writeHead</a></div><div class="ttdeci">bool writeHead(int statusCode, const QByteArray &amp;reasonPhrase, const Headers &amp;headers)</div><div class="ttdoc">Sends a response header to the request. </div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html_a3b35a246b8d6ca72cc246a36c1e4ae71"><div class="ttname"><a href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71">Tufao::HttpServer::requestReady</a></div><div class="ttdeci">void requestReady(Tufao::HttpServerRequest &amp;request, Tufao::HttpServerResponse &amp;response)</div><div class="ttdoc">This signal is emitted each time there is request. </div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html"><div class="ttname"><a href="class_tufao_1_1_http_server.html">Tufao::HttpServer</a></div><div class="ttdoc">The Tufao::HttpServer class provides an implementation of the HTTP protocol. </div><div class="ttdef"><b>Definition:</b> httpserver.h:54</div></div>
<div class="ttc" id="class_tufao_1_1_http_server_response_html_a1e72bbd8eb9bfb065a713a2ac9ba3b2e"><div class="ttname"><a href="class_tufao_1_1_http_server_response.html#a1e72bbd8eb9bfb065a713a2ac9ba3b2e">Tufao::HttpServerResponse::end</a></div><div class="ttdeci">bool end(const QByteArray &amp;chunk=QByteArray())</div><div class="ttdoc">This method signals to the server that all of the response headers and body has been sent; that serve...</div></div>
</div><!-- fragment --><p>The code shown above is what you need to create a program that will respond with Hello World to every request. It depends on QtCore, QtNetwork and Tufão.</p>
<p>In the lines 1-4, we import all definitions we need to this code work and in line 6, we import names from the <em><a class="el" href="namespace_tufao.html" title="This is the namespace where all Tufão facilities are grouped. ">Tufao</a></em> namespace into global namespace.</p>
<p>In the function main, we declare our event loop (line 10) that allow us to handle the server's connections asynchronously and in line 22, we start it.</p>
<p>In line 12, we declare the server object, responsible for manage HTTP messages. We can access the HTTP requests through the requestReady signal, as shown in lines 14 to 18. Then, we tell the server to listen for incoming connections on port 8080 (line 20) and our application is ready to serve HTTP clients.</p>
<p>All you need to handle a HTTP session is the pair of HttpServerRequest and HttpServerResponse objects. The HttpServerRequest exports the input of the session and the HttpServerResponse is the output, from the point of view of your application server.</p>
<p>Every HTTP response is made of three parts:</p>
<ul>
<li>A status-line</li>
<li>Some meta-data with key-value pairs (the headers)</li>
<li>A body (anything from text to binary-based data)</li>
</ul>
<p>In every response, you <b>must</b> call all these methods, in this order:</p>
<ol type="1">
<li>writeHead* to write the status-line</li>
<li>end* to close the HTTP session</li>
</ol>
<p>The headers are optional and you can set them before do any call to write or &ndash; obviously &ndash; end. See <a class="el" href="class_tufao_1_1_http_server_response.html" title="The Tufao::HttpServerResponse is used to respond to a Tufao::HttpServerRequest. ">Tufao::HttpServerResponse</a> for more details.</p>
<p>The handler used as parameter in QObject::connect function is a C++11 lambda, but you can use whatever QObject::connect accepts. In our handler, we just write a simple "Hello World" message.</p>
<h2><a class="anchor" id="tufao-revisiting-hello"></a>
Revisiting Hello World!</h2>
<p>Now that you got warm, let's see an example more complicated.</p>
<div class="image">
<img src="get_started_1.png" alt="get_started_1.png"/>
<div class="caption">
QtCreator's Tufão plugin</div></div>
<p> First of all, you must open QtCreator and go to the new project dialog, you may be able to select Tufão Web Server project from the list of projects in the Tufão category.</p>
<div class="image">
<img src="get_started_2.png" alt="get_started_2.png"/>
<div class="caption">
Tufão Web Server project templates</div></div>
<p> Go through the pages of the project wizard, selecting the <em>application</em> template. At the end, you'll get an unconfigured qmake-based application. Under QtCreator's interface, go to the <em>projects mode</em> and choose a configuration. If you don't configure the project, QtCreator won't be able to compile your project.</p>
<h2><a class="anchor" id="tufao-code"></a>
And then, there was the code</h2>
<p>You may have a <em>main.cpp</em> file with a code like this:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpPluginServer&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpFileServer&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;Tufao/NotFoundHandler&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpServerRequestRouter&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;Tufao/HttpServer&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespace_tufao.html">Tufao</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    QCoreApplication a(argc, argv);</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <a class="code" href="class_tufao_1_1_http_plugin_server.html">HttpPluginServer</a> plugins{<span class="stringliteral">&quot;routes.json&quot;</span>};</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <a class="code" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> router{</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, plugins},</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, <a class="code" href="class_tufao_1_1_http_file_server.html#a1f29209673aa254e50431993aaa56c15">HttpFileServer::handler</a>(<span class="stringliteral">&quot;public&quot;</span>)},</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, <a class="code" href="class_tufao_1_1_not_found_handler.html#ae97accd2a8e5820efc71786a7997c8c2">NotFoundHandler::handler</a>()}</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    };</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="class_tufao_1_1_http_server.html">HttpServer</a> server;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    QObject::connect(&amp;server, &amp;<a class="code" href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71">HttpServer::requestReady</a>,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                     &amp;router, &amp;<a class="code" href="class_tufao_1_1_http_server_request_router.html#a4b2f5dcb77545084f99a28880e6fc5ae">HttpServerRequestRouter::handleRequest</a>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    server.<a class="code" href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9">listen</a>(QHostAddress::Any, 8080);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">return</span> a.exec();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="ttc" id="class_tufao_1_1_http_plugin_server_html"><div class="ttname"><a href="class_tufao_1_1_http_plugin_server.html">Tufao::HttpPluginServer</a></div><div class="ttdoc">This class provides a plugin-based request handler. </div><div class="ttdef"><b>Definition:</b> httppluginserver.h:56</div></div>
<div class="ttc" id="class_tufao_1_1_http_server_request_router_html"><div class="ttname"><a href="class_tufao_1_1_http_server_request_router.html">Tufao::HttpServerRequestRouter</a></div><div class="ttdoc">This class provides a robust and high performance HTTP request router. </div><div class="ttdef"><b>Definition:</b> httpserverrequestrouter.h:63</div></div>
<div class="ttc" id="class_tufao_1_1_http_server_request_router_html_a4b2f5dcb77545084f99a28880e6fc5ae"><div class="ttname"><a href="class_tufao_1_1_http_server_request_router.html#a4b2f5dcb77545084f99a28880e6fc5ae">Tufao::HttpServerRequestRouter::handleRequest</a></div><div class="ttdeci">bool handleRequest(Tufao::HttpServerRequest &amp;request, Tufao::HttpServerResponse &amp;response) override</div><div class="ttdoc">It will route the request to the right handler. </div></div>
<div class="ttc" id="class_tufao_1_1_not_found_handler_html_ae97accd2a8e5820efc71786a7997c8c2"><div class="ttname"><a href="class_tufao_1_1_not_found_handler.html#ae97accd2a8e5820efc71786a7997c8c2">Tufao::NotFoundHandler::handler</a></div><div class="ttdeci">static std::function&lt; bool(HttpServerRequest &amp;, HttpServerResponse &amp;)&gt; handler()</div><div class="ttdoc">Returns a handler that don&#39;t depends on another object. </div><div class="ttdef"><b>Definition:</b> notfoundhandler.h:72</div></div>
<div class="ttc" id="namespace_tufao_html"><div class="ttname"><a href="namespace_tufao.html">Tufao</a></div><div class="ttdoc">This is the namespace where all Tufão facilities are grouped. </div><div class="ttdef"><b>Definition:</b> abstracthttpserverrequesthandler.h:30</div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html_a53ebaa69281886b1b8c2b535aaec8cd9"><div class="ttname"><a href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9">Tufao::HttpServer::listen</a></div><div class="ttdeci">bool listen(const QHostAddress &amp;address=QHostAddress::Any, quint16 port=0)</div><div class="ttdoc">Tells the server to listen for incoming connections on address address and port port. </div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html_a3b35a246b8d6ca72cc246a36c1e4ae71"><div class="ttname"><a href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71">Tufao::HttpServer::requestReady</a></div><div class="ttdeci">void requestReady(Tufao::HttpServerRequest &amp;request, Tufao::HttpServerResponse &amp;response)</div><div class="ttdoc">This signal is emitted each time there is request. </div></div>
<div class="ttc" id="class_tufao_1_1_http_file_server_html_a1f29209673aa254e50431993aaa56c15"><div class="ttname"><a href="class_tufao_1_1_http_file_server.html#a1f29209673aa254e50431993aaa56c15">Tufao::HttpFileServer::handler</a></div><div class="ttdeci">static std::function&lt; bool(HttpServerRequest &amp;, HttpServerResponse &amp;)&gt; handler(const QString &amp;rootDir)</div><div class="ttdoc">Returns a handler that don&#39;t depends on another object. </div></div>
<div class="ttc" id="class_tufao_1_1_http_server_html"><div class="ttname"><a href="class_tufao_1_1_http_server.html">Tufao::HttpServer</a></div><div class="ttdoc">The Tufao::HttpServer class provides an implementation of the HTTP protocol. </div><div class="ttdef"><b>Definition:</b> httpserver.h:54</div></div>
</div><!-- fragment --><p>A main file with 32 lines of code. It's a bunch of code, but they'll prove their value.</p>
<p>Tufão provides a web framework and has its own HTTP server (based on Ryan Dahl's HTTP parser). This design give you greater control over the applications and can really boost its performance. But, as uncle Ben may have told you:</p>
<blockquote class="doxtable">
<p>With great power comes great responsibility </p>
</blockquote>
<p>This may sound scary to you at first, but don't worry, the Tufão team will do their best to make this responsibility easier to assume, with each realease. But you need to promisse that you'll use Tufão facilities and read the documentation.</p>
<p>To use the Tufão HTTP server, we instantiate, as show in the line 24, a <a class="el" href="class_tufao_1_1_http_server.html" title="The Tufao::HttpServer class provides an implementation of the HTTP protocol. ">Tufao::HttpServer</a>, put it to listen on port 8080, as show in the line 29, and start a event loop, as show in the line 31. This server will expose all we need to this introduction.</p>
<p>The <a class="el" href="class_tufao_1_1_http_server.html" title="The Tufao::HttpServer class provides an implementation of the HTTP protocol. ">Tufao::HttpServer</a> will emit the <a class="el" href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71" title="This signal is emitted each time there is request. ">Tufao::HttpServer::requestReady</a> signal each time a request comes. We can handle all requests in a single place in the code, but we won't do that, because... em... as some wise person said before, we need:</p>
<blockquote class="doxtable">
<p><a href="https://en.wikipedia.org/wiki/Divide_and_conquer">Divide and conquer</a> </p>
</blockquote>
<p>What I mean is that every request <b>IS</b> differente and every on needs a different handler. The convention is to serve different content under different paths. This is what we'll do.</p>
<p>We could decompose our slot into some functions to do the job. But we won't do that, because Tufão already has a better abstraction for the problem, <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router. ">Tufao::HttpServerRequestRouter</a>.</p>
<p>The idea behind <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router. ">Tufao::HttpServerRequestRouter</a> is to glue a chain of request handlers and mapped paths to them. If a request comes to a handler unable to handle it, the request is delegated to another handler in the chain.</p>
<p>In the code, we have one router (line 18) and three handlers (lines 16/19, 20 and 21). In line 26-27, we bind the router and the server. The handlers, in order, are:</p>
<ul>
<li><a class="el" href="class_tufao_1_1_http_plugin_server.html" title="This class provides a plugin-based request handler. ">Tufao::HttpPluginServer</a>: Uses plugins to handle the requests. A plugin mechanism is what allows you to change the running code without restart the application. In this code, we use the file routes.json to configure the plugins.</li>
<li><a class="el" href="class_tufao_1_1_http_file_server.html" title="You can use this class to serve static files under Tufão. ">Tufao::HttpFileServer</a>: Serve static files. We use the folder <em>public</em> as root dir.</li>
<li><a class="el" href="class_tufao_1_1_not_found_handler.html" title="A handler that responds with &quot;Not found&quot; to every request. ">Tufao::NotFoundHandler</a>: A handler that responds to every request with a 404 status code.</li>
</ul>
<p>See <a class="el" href="pluginsystem.html">Tufão's plugin system</a> to learn how to create and attach plugins to the running application.</p>
<p>If you access <a href="http://localhost:8080/">http://localhost:8080/</a> you'll see a message telling you that the page wasn't found. Create a folder called public in the working dir of the executable and put a file called index.html there: </p><pre class="fragment">&lt;html&gt;
  &lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Congratulations,&lt;/h1&gt;
    &lt;p&gt;you are able to start web development in C++ with Tufão&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre><p>Now access the page <a href="http://localhost:8080/index.html">http://localhost:8080/index.html</a> and see the result. As an exercise, I left the task to add a <a href="https://en.wikipedia.org/wiki/Favicon">favicon</a> to your application using the <a class="el" href="pluginsystem.html">Tufão's plugin system</a>.</p>
<h2><a class="anchor" id="tufao-build"></a>
Build system integration</h2>
<p>The Tufão has native support to three build systems: qmake, pkgconfig and CMake.</p>
<p>Once Tufão is correctly installed, you can use Tufão in your qmake-based applications appending the following line to your project file, where <em>x</em> is the major version (0 for Tufão 0.x and 1 for Tufão 1.x) you want to use: </p><pre class="fragment">CONFIG += TUFAOx
</pre><p>If you use CMake, just follow the common steps (require package and handle compile and link flags) in your CMakeLists.txt file: </p><pre class="fragment">find_package(Tufao1 1.0 REQUIRED)
include_directories("${TUFAO_INCLUDE_DIR}")
target_link_libraries(foobar ${TUFAO_LIBRARIES})
</pre><p>If you want to use a FindTufao.cmake file embedded in your project dir, add the following line to your CMakeLists.txt: </p><pre class="fragment">set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "/path/to/FindTufao.cmake")
</pre><p>If you want to use autotools or another build system that has pkgconfig support, you can use the Tufão's pkgconfig module, where <em>x</em> is the major version (0 for Tufão 0.x and 1 for Tufão 1.x) you want to use: </p><pre class="fragment">$ pkg-config tufaox
</pre><p>If want to use a build system that don't support pkgconfig, you should be ashamed, but you may still be able to use Tufão (probably editing the compiler -I flag and the linker -L and -l flags). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Mar 29 2015 12:14:31 for tufao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
